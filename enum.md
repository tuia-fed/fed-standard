# æšä¸¾ä¸å¸¸é‡

## é­”æœ¯æ•°å­—

ç¨‹åºè®¾è®¡ä¸­æ‰€è°“çš„é­”æœ¯æ•°å­—ï¼ˆmagic numberï¼‰æ˜¯æŒ‡ç¡¬ç¼–ç åœ¨ä»£ç é‡Œçš„å…·ä½“æ•°å€¼ï¼ˆå¦‚â€œ10â€â€œ123â€ç­‰ä»¥æ•°å­—ç›´æ¥å†™å‡ºçš„å€¼ï¼‰ã€‚è™½ç„¶ç¨‹åºä½œè€…å†™çš„æ—¶å€™è‡ªå·±èƒ½äº†è§£æ•°å€¼çš„æ„ä¹‰ï¼Œä½†å¯¹å…¶ä»–ç¨‹åºå‘˜è€Œè¨€ï¼Œç”šè‡³åˆ¶ä½œè€…æœ¬äººç»è¿‡ä¸€æ®µæ—¶é—´åï¼Œä¼šéš¾ä»¥äº†è§£è¿™ä¸ªæ•°å€¼çš„ç”¨é€”ï¼Œåªèƒ½è‹¦ç¬‘è®½åˆºâ€œè¿™ä¸ªæ•°å€¼çš„æ„ä¹‰è™½ç„¶ä¸æ‡‚ï¼Œä¸è¿‡è‡³å°‘ç¨‹åºèƒ½å¤Ÿè¿è¡Œï¼ŒçœŸæ˜¯ä¸ªé­”æœ¯èˆ¬çš„æ•°å­—â€è€Œå¾—åï¼ˆèµ·æºå‚è€ƒå¹³æ–¹æ ¹å€’æ•°é€Ÿç®—æ³•ï¼‰ã€‚

**åŸºäºä»¥ä¸‹ç†ç”±ï¼Œä»£ç ä¸­çš„ä»»ä½•åœ°æ–¹ä¸åº”è¯¥å­˜åœ¨é­”æœ¯æ•°å­—**

- æ•°å€¼çš„æ„ä¹‰éš¾ä»¥äº†è§£
- æ•°å€¼éœ€è¦å˜åŠ¨æ—¶ï¼Œå¯èƒ½è¦æ”¹ä¸åªä¸€ä¸ªåœ°æ–¹

## ğŸŒ°

```js
const price_tax = 1.05 * price;
```

è¾“å…¥çš„ä»·æ ¼ï¼ˆpriceï¼‰è®¡ç®—å«ç¨ï¼ˆprice_taxï¼‰å”®ä»·çš„ç¨‹åºã€‚ ä½†ç¨ç‡å¹¶ä¸æ˜¯ä¸‡å¹´ä¸å˜ï¼Œå½“æ”¿åºœè°ƒæ•´ç¨ç‡æ—¶ï¼Œä¼šæœ‰ä¿®æ”¹ç¨‹åºçš„å¿…è¦ã€‚ è¿™é‡Œâ€œ1.05â€å°±æ˜¯ä¸€ç§é­”æœ¯æ•°å­—ï¼Œâ€œä¸ºä»€ä¹ˆæ˜¯ 1.05â€ä¼šè®©äººæ— æ³•é©¬ä¸Šäº†è§£ã€‚ ä¸‹é¢æ˜¯å»æ‰é­”æœ¯æ•°å­—çš„ç¤ºä¾‹ï¼Œç¨‹åºå®¹æ˜“äº†è§£ä¹Ÿå®¹æ˜“ä¿®æ­£ã€‚

```js
const TAX = 0.05;
const price_tax = (1.0 + TAX) * price;
```

## æšä¸¾

### ä»€ä¹ˆæ˜¯æšä¸¾

**åœ¨æ•°å­¦å’Œè®¡ç®—æœºç§‘å­¦ç†è®ºä¸­ï¼Œä¸€ä¸ªé›†çš„æšä¸¾æ˜¯åˆ—å‡ºæŸäº›æœ‰ç©·åºåˆ—é›†çš„æ‰€æœ‰æˆå‘˜çš„ç¨‹åºï¼Œæˆ–è€…æ˜¯ä¸€ç§ç‰¹å®šç±»å‹å¯¹è±¡çš„è®¡æ•°ã€‚è¿™ä¸¤ç§ç±»å‹ç»å¸¸ï¼ˆä½†ä¸æ€»æ˜¯ï¼‰é‡å ã€‚**
è¿™ä¹ˆè®²å¯èƒ½ç•¥æŠ½è±¡ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œä¸€ä¸ªæ˜ŸæœŸçš„ä¸ƒå¤©ï¼Œä¾¿æ˜¯ä¸€ä¸ªæšä¸¾ã€‚
**åœ¨ä»£ç ä¸­ï¼Œä»»ä½•å€¼å‡ºç°çš„èŒƒå›´åœ¨æœ‰é™é›†å†…ï¼Œå¹¶ä¸”ä¸ä¸šåŠ¡ç›¸å…³ï¼Œåˆ™å¿…é¡»ä½¿ç”¨æšä¸¾çš„å†™æ³•**

```js
/*
 * ä¸€å‘¨ä¸ƒå¤©çš„æšä¸¾
 * @enum {number}
 **/
const WeekType = {
  /* æ˜ŸæœŸä¸€ **/
  MON: 1,

  /* æ˜ŸæœŸäºŒ **/
  TUE: 2,

  /* æ˜ŸæœŸä¸‰ **/
  WED: 3,

  /* æ˜ŸæœŸå›› **/
  THU: 4,

  /* æ˜ŸæœŸäº” **/
  FRI: 5,

  /* æ˜ŸæœŸå…­ **/
  SAT: 6,

  /* æ˜ŸæœŸå¤© **/
  SUN: 7
};
```

## å¦‚ä½•ç”¨æšä¸¾å’Œå¸¸é‡æ›¿æ¢é­”æœ¯æ•°å­—

### å¸¸é‡

```js
// ä¸šåŠ¡ä¸­ç»å¸¸ä¼šé‡åˆ°è®¾ç½®æŸä¸ªçŠ¶æ€ä¸ºåˆå§‹çŠ¶æ€çš„ä»£ç ï¼Œä¸‹é¢æ˜¯æ²¡æœ‰ä»£ç å¤ç”¨çš„ä»£ç 
class SomeComponent extends React.Component {
  state = {
    userConfig: {
      threshold: 0,
      type: SomeType.TYPE1,
      field: FieldType.FIELD2
    },
    modalVisible: false
  };

  resetUserConfig = () => {
    // userConfigå’Œåˆå§‹çš„stateä¸­çš„é‡å¤äº†
    this.setState({
      userConfig: {
        threshold: 0,
        type: SomeType.TYPE1,
        field: FieldType.FIELD2
      }
    });
  };
}

// è¿™ä¹ˆå†™å°±clearä¸å°‘
const DEFAULT_USER_CONFIG = {
  threshold: 0,
  type: SomeType.TYPE1,
  field: FieldType.FIELD2
};

class SomeComponent extends React.Component {
  state = {
    userConfig: DEFAULT_USER_CONFIG,
    modalVisible: false
  };

  resetUserConfig = () => {
    this.setState({
      userConfig: DEFAULT_USER_CONFIG
    });
  };
}
```

### æšä¸¾

1. æšä¸¾ç»Ÿä¸€å†™åœ¨`constant.js`æ–‡ä»¶ä¸­ï¼Œå…¨å±€ä½¿ç”¨åˆ°çš„æšä¸¾å†™åœ¨`lib/constant`ä¸‹ï¼Œå…¶å®ƒæƒ…å†µä¸‹ï¼Œå†™åœ¨ä¸šåŠ¡ä»£ç ç›®å½•ä¸‹çš„`constant.js`ä¸­ï¼ˆæ²¡æœ‰å°±æ–°å»ºä¸€ä¸ª QWQï¼‰
1. æšä¸¾å¯¹è±¡ç”¨ Pascal Caseï¼ˆå¤§é©¼å³°ï¼‰å†™æ³•å‘½åï¼Œå¼ºçƒˆå»ºè®®å˜é‡åä»¥ Type ç»“å°¾
1. æšä¸¾å¯¹è±¡ä½¿ç”¨ jsdoc æ³¨é‡Šï¼Œå†™æ˜æšä¸¾ä¸­å€¼çš„ç±»å‹å’Œæšä¸¾çš„ä½¿ç”¨åœºæ™¯
1. æšä¸¾å¯¹è±¡çš„ key è¯·å…¨éƒ¨å¤§å†™ï¼Œå•è¯ä¹‹é—´ç”¨åˆ†éš”çº¿éš”å¼€ã€‚
1. å»ºè®®åœ¨æšä¸¾å¯¹è±¡çš„ key ä¸Šå†™ä¸Šæ³¨é‡Šï¼Œè¯´æ˜æšä¸¾çš„è¿™ä¸ªå­—æ®µæ˜¯å¹²ä»€ä¹ˆçš„ã€‚æ¯”å¦‚ä¸‹é¢çš„`DINGTALK`ï¼Œå¯èƒ½å…¶å®ƒåŒå­¦ä¸çŸ¥é“æ˜¯é’‰é’‰çš„å®˜æ–¹è‹±æ–‡å

```js
/*
 * è­¦æŠ¥åŠŸèƒ½çš„æŠ¥è­¦æ–¹å¼
 * @enum{number}
 **/
const AlertType = {
  /* é’‰é’‰ **/
  DINGTALK: 1,

  /* é‚®ä»¶ **/
  MAIL: 2
};

// ...
// ...
if (selectedAlertType === AlertType.DINGTALK) {
  // å¤„ç†æŠ¥è­¦æ–¹å¼ä¸ºé’‰é’‰æ—¶çš„é€»è¾‘
}
```

ç»å¸¸æˆ‘ä»¬éœ€è¦ä»æŸä¸ªæšä¸¾å­—æ®µå¾—åˆ°ä»–çš„ä¸­æ–‡å­—ç¬¦ä¸²ï¼Œä¾¿äºåœ¨é¡µé¢ä¸Šæ˜¾ç¤ºï¼Œæˆ–è€…å…¶å®ƒæŸä¸ªå±æ€§åˆ°å¦ä¸€å±æ€§çš„æ˜ å°„ã€‚
è¿™ç§æƒ…å†µï¼Œåº”è¯¥è¿™æ ·å†™ã€‚

1. å­—å…¸åçš„å˜é‡ä¹Ÿå†™åœ¨`constant.js`ä¸­
1. å­—å…¸çš„å˜é‡åå…¨å¤§å†™ï¼Œä»¥`MAP`ç»“å°¾
1. å­—å…¸çš„ key ä½¿ç”¨å®šä¹‰è¿‡çš„æšä¸¾ï¼Œä¸å…è®¸ç›´æ¥ä½¿ç”¨æ•°å­—
1. ä½¿ç”¨å­—å…¸æ—¶ï¼Œç”¨æ–¹æ‹¬å·`[]`è·å¾—å­—å…¸ä¸­çš„å€¼

```js
export const ALERT_TEXT_MAP = {
  [AlertType.DINGTALK]: 'é’‰é’‰',
  [AlertType.MAIL]: 'é‚®ä»¶'
};

// åšä¸€äº›å…¶å®ƒäº‹æƒ…

const currentText = ALERT_TEXT_MAP[currentAlertType];
```

æˆ‘ä»¬å¯ä»¥ç”¨ä¸Šé¢çš„å¸¸é‡æ¥ç”Ÿæˆé€‰é¡¹æ•°ç»„ã€‚è¿™ä¸ªå®ç°ä¼šåœ¨ä¸ä¹…å°è£…æˆå…¬å…±æ–¹æ³•ä¾›å¤§å®¶ä½¿ç”¨
ä¸‹é¢ä»£ç ä¸­çš„ toPairs æ˜¯ lodash ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥æŠŠ`{ foo: 'bar', biz: 'bah' }`å˜æˆ `[['foo', 'bar'], ['biz', 'bah']]`ï¼Œè¯¦æƒ…å¯ä»¥è§[è¿™é‡Œ](https://kapeli.com/dash_share?docset_file=Lo-Dash&docset_name=Lodash&path=lodash.com/docs/4.17.html%23toPairs&platform=lodash&repo=Main&source=lodash.com/docs/4.17.10&version=4.17.11)
åº”è¯¥è¿™æ ·å†™

1. options å†™åœ¨`constant.js`ä¸­
2. options çš„å˜é‡åå…¨å¤§å†™ï¼Œä»¥`OPTIONS`ç»“å°¾

```js
export const ALERT_TYPE_OPTIONS = toPairs(ALERT_TEXT_MAP).map(
  ([label, key]) => ({ label, key })
);

// ç„¶åæˆ‘ä»¬æŠŠALERT_TYPE_OPTIONSä¼ ç»™ç»„ä»¶å°±Vanâ™‚äº‹äº†
return <CheckBoxGroup options={ALERT_TYPE_OPTIONS} />;
```
